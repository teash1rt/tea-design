var Ce=Object.defineProperty;var be=(e,o,t)=>o in e?Ce(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var p=(e,o,t)=>(be(e,typeof o!="symbol"?o+"":o,t),t);import{d as O,h as M,g as U,o as b,c as k,k as v,n as I,t as F,e as B,F as Z,D as tt,a6 as ke,j as lt,a7 as St,x as _t,a4 as we,a as Te,N as yt,r as rt,b as Dt,w as vt,l as et,X as Se,M as _e,a8 as Pe,_ as ee,p as se,m as ne,a9 as Me,H as oe,s as Pt,aa as $e,ab as Ee,ac as De,ad as Ie,ae as Ne,af as Ae,ag as Le,ah as Fe,ai as Re,aj as Oe,V as ze,u as We,y as He,ak as Ve,al as qe,am as Je,an as Be}from"./chunks/framework.7626db26.js";import{c as ie,d as ae,a as st,e as q,i as Ot,u as je,b as Ye,m as Ct,f as Qe,C as ct,t as H,g as Ge}from"./chunks/graph.af0b31dc.js";import{t as V}from"./chunks/errors.2cebd531.js";import{t as re}from"./chunks/theme.bb22acc0.js";const Ue=e=>{const o=e.getFullYear(),t=e.getMonth(),s=e.getDate();return{year:o,month:t,day:s}},Xe=e=>{const{year:o,month:t,day:s}=Ue(new Date);return e.getDate()===s&&e.getMonth()===t&&e.getFullYear()===o},Ke=(e,o,t)=>e.getMonth()===o&&e.getFullYear()===t,Ze=(e,o)=>o!=="mini"?[null,"January","February","March","April","May","June","July","August","September","October","November","December"][e]:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e],pt=(e,o,t,s)=>t==="zh"?`${e}年${o}月`:`${Ze(o,s)} ${e}`,ts=(e,o)=>{const t=e==="en"?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["日","一","二","三","四","五","六"];return o&&t.push(t.shift()),t},es={mondayFirst:{type:Boolean,default:!1,validator(e){return ie(e)}},lang:{type:String,default:()=>"zh",validator(e){return["zh","en"].includes(e)}},size:{type:String,default:()=>"medium",validator(e){return["large","medium","small","mini"].includes(e)}},theme:{type:String,default:()=>"tea",validator(e){return["tea","info","wine"].includes(e)}},headerMode:{type:String,default:()=>"today-between",validator(e){return["today-between","month-center","year-month-center","simple-center"].includes(e)}}},ss={class:"t-calendar"},ns={key:0},os={key:1},is={key:2},as={class:"header-today-group"},rs={key:3},ls={class:"t-calendar-body"},cs={class:"t-calendar-week"},zt=O({name:"t-calendar",__name:"calendar",props:es,setup(e){const o=e,t=new Date,s=M(t.getMonth()),n=M(t.getFullYear()),i=U(()=>ts(o.lang,o.mondayFirst)),a=M(null),r=U(()=>{let h=new Date(n.value,s.value,1),d=h.getDay()===0?7:h.getDay(),f=new Date(h.getTime()-(o.mondayFirst?d-1:d)*864e5),T=[];for(let E=0;E<42;E++)T.push(new Date(f.getTime()+E*864e5));return T}),l=(h,d)=>{a.value=null,setTimeout(()=>{a.value=h+d===1?"top":"down"},0),h===-1&&s.value===0?(n.value-=1,s.value=11):h===1&&s.value===11?(n.value+=1,s.value=0):(s.value+=h,n.value+=d)},c=()=>{s.value=t.getMonth(),n.value=t.getFullYear()},y=(h,d,f)=>Xe(h)?`is-today--${o.theme}`:Ke(h,d,f)?`cur-month--${o.theme}`:`not-cur-month--${o.theme}`;return(h,d)=>(b(),k("div",ss,[v("div",{class:I(["t-calendar-header",`header--${h.headerMode}`])},[h.headerMode==="month-center"?(b(),k("div",ns,[v("span",{class:"header-prev",onClick:d[0]||(d[0]=f=>l(-1,0))},"<"),v("span",{class:I(`header-date--${h.size}`)},F(pt(n.value,s.value+1,h.lang,h.size)),3),v("span",{class:"header-next",onClick:d[1]||(d[1]=f=>l(1,0))},">")])):h.headerMode==="year-month-center"?(b(),k("div",os,[v("span",{class:"header-prev",onClick:d[2]||(d[2]=f=>l(0,-1))},"<<"),v("span",{class:"header-prev",onClick:d[3]||(d[3]=f=>l(-1,0))},"<"),v("span",{class:I(`header-date--${h.size}`)},F(pt(n.value,s.value+1,h.lang,h.size)),3),v("span",{class:"header-next",onClick:d[4]||(d[4]=f=>l(1,0))},">"),v("span",{class:"header-next",onClick:d[5]||(d[5]=f=>l(0,1))},">>")])):h.headerMode==="today-between"?(b(),k("div",is,[v("span",{class:I(`header-date--${h.size}`)},F(pt(n.value,s.value+1,h.lang,h.size)),3),v("span",as,[v("span",{class:"header-prev",onClick:d[6]||(d[6]=f=>l(-1,0))},"<"),v("span",{class:"header-today",onClick:c},F(h.lang==="zh"?"今日":"today"),1),v("span",{class:"header-next",onClick:d[7]||(d[7]=f=>l(1,0))},">")])])):h.headerMode==="simple-center"?(b(),k("div",rs,[v("span",{class:I(`header-date--${h.size}`)},F(pt(n.value,s.value+1,h.lang,h.size)),3)])):B("",!0)],2),v("div",ls,[v("div",cs,[(b(!0),k(Z,null,tt(i.value,f=>(b(),k("div",{key:f,class:I(`t-calendar-week-elm--${h.size}`)},F(f),3))),128))]),(b(),k(Z,null,tt(6,f=>v("div",{key:f,class:"t-calendar-day"},[(b(),k(Z,null,tt(7,T=>v("span",{key:f*10+T,class:I([`t-calendar-day-elm--${h.size}`,y(r.value[(f-1)*7+(T-1)],s.value,n.value),a.value])},F(r.value[(f-1)*7+(T-1)].getDate()),3)),64))])),64))])]))}}),hs={install:e=>{e.component(zt.name,zt)}},us=e=>{const o=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return`${e.getFullYear()}-${o}-${t}`},ds=e=>/^\d{4}-\d{2}-\d{2}$/.test(e)&&new Date(e).toString()!=="Invalid Date",ps={theme:{type:String,default:()=>"tea",validator(e){return["tea","info","wine"].includes(e)}},col:{type:Number,default:40,validator(e){return(!ae(e)||e<0)&&V("calendar-heatmap -> col","列数应为正整数"),!0}},mapData:{type:Object,default:{},validator(e){const o=Object.entries(e);for(const[t,s]of o)st(t)&&q(s)&&ds(t)||V("calendar-heatmap -> mapData","确保数据类型为{ [key: string]: number }，且string应为'YYYY-MM-DD'的格式");return!0}},thresholds:{type:Array,default:[1,3,5,7],validator(e){return e.length===4&&e.every((o,t)=>q(o)&&(t===0||o>e[t-1]))||V("calendar-heatmap -> thresholds","应为长度为4且递增的数组"),!0}},title:{type:String,default:null,validator(e){return st(e)}},tipInfo:{type:String,default:null,validator(e){return st(e)}}},fs={hover:e=>Ot(e),pick:e=>Ot(e)},ms={message:{type:String,default:null,validator(e){return st(e)}},theme:{type:String,default:()=>"dark",validator(e){return["dark","light","grey"].includes(e)}}},gs={ref:"t-tooltip"},ys=v("br",null,null,-1),Mt=O({name:"t-tooltip",__name:"tooltip",props:ms,setup(e){const o=e,t=M(null),s=M(null),n=ke({triggerX:0,triggerY:0,triggerW:0,triggerOutSide:!1,messageW:0,messageH:0}),i=M(0),a=()=>{i.value=window.scrollY},r=M("beforeMount");lt(()=>{window.addEventListener("scroll",a),a();const y=M(t.value.children[0]),{isOutside:h}=St(y);_t(h,d=>{n.triggerOutSide=d;const{elementPositionY:f,elementPositionX:T,elementWidth:E}=St(y);n.triggerX=T.value,n.triggerY=f.value,n.triggerW=E.value}),r.value=null,n.triggerOutSide=!0}),_t(s,y=>{const{elementWidth:h,elementHeight:d}=St(y);n.messageW=h.value,n.messageH=d.value});const l=U(()=>({left:n.triggerX+n.triggerW/2-n.messageW/2+"px",top:n.triggerY-n.messageH-i.value-9+"px"})),c=U(()=>({left:n.triggerX+n.triggerW/2-5+"px",top:n.triggerY-i.value-10+"px"}));return we(()=>{window.removeEventListener("scroll",a)}),(y,h)=>{var d;return b(),k("div",gs,[!n.triggerOutSide&&((d=o.message)!=null&&d.length)?(b(),k("div",{key:0,class:I(r.value)},[v("div",{class:I(["message",`message--${o.theme}`]),style:yt(l.value),ref_key:"message",ref:s},[(b(!0),k(Z,null,tt(o.message.split(new RegExp("(?<!\\\\)\\\\n")),(f,T)=>(b(),k("div",{key:T},[Te(F(f)+" ",1),ys]))),128))],6),v("div",{class:I(["arrow",`arrow--${o.theme}`]),style:yt(c.value)},null,6)],2)):B("",!0),v("div",{class:"t-tooltip-trigger",ref_key:"trigger",ref:t},[rt(y.$slots,"trigger")],512)],512)}}}),xs={class:"t-calendar-heatmap"},vs={key:0,class:"t-calendar-heatmap-title"},Cs={class:"t-calendar-heatmap-grid"},bs=["id","date","onMouseover","onClick"],ks=["id","date","onMouseover","onClick"],A=7,Wt=O({name:"t-calendar-heatmap",__name:"calendar-heatmap",props:ps,emits:fs,setup(e,{emit:o}){const t=e,s=new Date,n=s.getDay(),i=(c,y)=>{const h=7*c+y-7+n;return us(new Date(s.getTime()-h*864e5))},a=c=>{let y=t.theme;return c>t.thresholds[0]&&c<=t.thresholds[1]?y+"--level1":c>t.thresholds[1]&&c<=t.thresholds[2]?y+"--level2":c>t.thresholds[2]&&c<=t.thresholds[3]?y+"--level3":c>t.thresholds[3]?y+"--level4":null},r=(c,y)=>{const h={date:c,count:t.mapData[c]};o(y?"pick":"hover",h)},l=(c,y)=>t.mapData[i(t.col-c,A-y)]?a(t.mapData[i(t.col-c,A-y)]):null;return(c,y)=>(b(),k("div",xs,[t.title?(b(),k("div",vs,F(t.title),1)):B("",!0),v("div",Cs,[(b(!0),k(Z,null,tt(t.col,h=>(b(),k("div",{class:"col",key:h},[(b(),k(Z,null,tt(A,d=>v("div",{class:"row",key:h*1e3+d},[t.tipInfo?(b(),Dt(Mt,{key:0,clickTrigger:"",message:t.tipInfo,theme:et(je)()?"grey":"dark"},{trigger:vt(()=>[h!=t.col||d<=et(n)?(b(),k("div",{key:0,class:I(["t-calendar-heatmap-day",l(h,d)]),id:`(${t.col-h},${A-d})`,date:i(t.col-h,A-d),onMouseover:f=>r(i(t.col-h,A-d),0),onClick:f=>r(i(t.col-h,A-d),1)},null,42,bs)):B("",!0)]),_:2},1032,["message","theme"])):h!=t.col||d<=et(n)?(b(),k("div",{key:1,class:I(["t-calendar-heatmap-day",l(h,d)]),id:`(${t.col-h},${A-d})`,date:i(t.col-h,A-d),onMouseover:f=>r(i(t.col-h,A-d),0),onClick:f=>r(i(t.col-h,A-d),1)},null,42,ks)):B("",!0)])),64))]))),128))])]))}}),ws={install:e=>{e.component(Wt.name,Wt)}},Ts={install:e=>{e.component(Mt.name,Mt)}},Ss={animation:{type:String,default:()=>"none",validator(e){return["origin","edge","none"].includes(e)}},bottom:{type:Number,default:80,validator(e){return q(e)}},right:{type:Number,default:60,validator(e){return q(e)}},gap:{type:Number,default:45,validator(e){return q(e)}}},le=Symbol("FloatButtonContextKey"),_s={class:"t-float-content"},Ps={class:"t-float-items"},Ht=O({name:"t-float-button",__name:"float-button",props:Ss,setup(e){const o=e,t=M(!1),s={floatVisible:t,animation:o.animation,gap:o.gap};Se(le,s);const n=()=>{t.value=!t.value},i=U(()=>({right:o.right+"px",bottom:o.bottom+"px"}));return(a,r)=>(b(),k("div",{class:"t-float-button",style:yt(i.value)},[v("div",_s,[v("div",{class:"t-float-home",onClick:n},[rt(a.$slots,"default")]),v("div",Ps,[rt(a.$slots,"menu")])])],4))}}),Vt=O({name:"t-float-item",__name:"float-item",setup(e){const{floatVisible:o,animation:t,gap:s}=_e(le),n=U(()=>t),i=U(()=>({marginBottom:s+"px"}));return(a,r)=>(b(),Dt(Pe,{name:n.value},{default:vt(()=>[et(o)?(b(),k("div",{key:0,class:"t-float-item",style:yt(i.value)},[rt(a.$slots,"default")],4)):B("",!0)]),_:3},8,["name"]))}}),Ms={install:e=>{e.component(Ht.name,Ht)}},$s={install:e=>{e.component(Vt.name,Vt)}},Es=e=>{const o=[...e];for(let t=o.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1)),n=o[s];o[s]=o[t],o[t]=n}return o},Ds={rollMethod:{type:String,default:()=>"byClick",validator(e){return["byClick","byCountDown"].includes(e)}},selectMethod:{type:String,default:()=>"normal",validator(e){return["normal","unique"].includes(e)}},data:{type:Array,default:[],validator(e){return Ye(e)}},duration:{type:Number,default:2.5,validator(e){return q(e)}},startText:{type:String,default:null,validator(e){return st(e)}},noDataText:{type:String,default:"暂无内容",validator(e){return st(e)}},withoutFooter:{type:Boolean,default:!1,validator(e){return ie(e)}}},Is={class:"t-rollcall"},Ns={class:"t-rollcall-content"},As={key:0,class:"entity"},Ls={key:1,class:"no-data"},Fs={key:0,class:"t-rollcall-footer"},Rs=v("div",{class:"divider"},null,-1),Os={key:2,class:"loading"},qt=O({name:"t-rollcall",__name:"rollcall",props:Ds,setup(e,{expose:o}){const t=e,s=M(null),n=M(50),i=M(!1);async function a(j){return new Promise(J=>setTimeout(J,j))}let r=t.data,l=!0,c=null;async function y(){i.value=!0,l=!0,r=Es(r),s.value=0;for(let j=0;l;j++)s.value=(s.value+1)%r.length,await a(n.value);c=r[s.value]}let h;const d=()=>{c=null,t.data.length&&(s.value!==null&&t.selectMethod==="unique"&&(r.length===1?r=t.data:r.splice(s.value,1)),t.rollMethod==="byCountDown"&&(clearTimeout(h),h=setTimeout(()=>{f()},t.duration*1e3)),y())},f=()=>{t.rollMethod==="byCountDown"&&clearTimeout(h),i.value=!1,l=!1};return o({start:()=>{d()},stop:()=>{f()},get:()=>c}),(j,J)=>(b(),k("div",Is,[v("div",Ns,[t.data.length?(b(),k("div",As,F(s.value!==null?et(r)[s.value]:t.startText),1)):(b(),k("div",Ls,F(t.noDataText),1))]),t.withoutFooter?B("",!0):(b(),k("div",Fs,[Rs,i.value?t.rollMethod==="byClick"?(b(),k("button",{key:1,onClick:f},"停止")):t.rollMethod==="byCountDown"?(b(),k("div",Os)):B("",!0):(b(),k("button",{key:0,onClick:d},"开始"))]))]))}}),zs={install:e=>{e.component(qt.name,qt)}},Ws={context:{type:Object,default:()=>$t,validator(e){const o=JSON.parse(JSON.stringify($t)),t=Ct(o,e),s=t.style.edgeCount;if((!ae(s)||s<3)&&V("radar-chart -> edgeCount","边数应为大于3的整数"),t.axis.axisMax.length!==s&&V("radar-chart -> axisMax","坐标最大值长度应与边数保持一致"),t.data.length>0)for(const n of t.data){n&&n.length!==s&&V("radar-chart -> data","数据长度应与边数保持一致");for(const i of n)q(i)||V("radar-chart -> data","数据应为number类型")}return!0}}},$t={style:{canvasSize:600,edgeCount:6,baseLineCount:2,mainColor:["#91cc75","#4aa7e3","#f1a731","#ee6666","#8055cd"],fillColor:["#00ff00","#00aeec","#ffff00","#ff0000","#800080"]},axis:{label:["label1","label2","label3","label4","label5","label6"],labelStyle:"22px Arial",labelColor:"#000000",axisMax:[100,100,100,100,100,100]},data:[[65,65,65,65,65,65]]},Hs={hover:e=>q(e)||Qe(e)},ft=(e,o,t,s)=>{const n=(e*360/t-45)*Math.PI/180;return{x:o*Math.sin(n)+o*Math.cos(n)+s/2,y:o*Math.sin(n)-o*Math.cos(n)+s/2}},Vs=(e,o,t,s,n)=>Math.sqrt((e-t)*(e-t)+(o-s)*(o-s))<=n,qs=(e,o,t,s,n,i,a)=>{const r=Math.min(e,t),l=Math.max(e,t),c=Math.min(o,s),y=Math.max(o,s);if(n>=r&&n<=l&&i>=c&&i<=y){const h=t-e,d=s-o,f=n-e,T=i-o;if(Math.abs(h*T-d*f)/Math.sqrt(h*h+d*d)<=a)return!0}return!1},Js=(e,o,t)=>{let s=!1;for(let n=0,i=o.length-1;n<o.length;i=n++){const a=o[n].x,r=o[n].y,l=o[i].x,c=o[i].y,y=Vs(a,r,e.x,e.y,10)||qs(a,r,l,c,e.x,e.y,5),h=r>e.y!=c>e.y&&e.x<(l-a)*(e.y-r)/(c-r)+a;if(y)return!0;t&&h&&(s=!s)}return s},Jt=e=>{if(e.startsWith("rgb(")&&e.endsWith(")")){const o=e.slice(4,-1).split(","),t=parseInt(o[0].trim(),10),s=parseInt(o[1].trim(),10),n=parseInt(o[2].trim(),10),i=t+(255-t)*.25,a=s+(255-s)*.25,r=n+(255-n)*.25;return`rgb(${i}, ${a}, ${r})`}else if(e.startsWith("rgba(")&&e.endsWith(")")){const o=e.slice(5,-1).split(","),t=parseInt(o[0].trim(),10),s=parseInt(o[1].trim(),10),n=parseInt(o[2].trim(),10),i=parseFloat(o[3].trim()),a=t+(255-t)*.25,r=s+(255-s)*.25,l=n+(255-n)*.25;return`rgba(${a}, ${r}, ${l}, ${i})`}else if(e.startsWith("#")&&(e.length===4||e.length===7)){const o=parseInt(e.substring(1),16),t=o>>16&255,s=o>>8&255,n=o&255,i=t+(255-t)*.25,a=s+(255-s)*.25,r=n+(255-n)*.25;return`#${(1<<24|i<<16|a<<8|r).toString(16).slice(1)}`}return e};class Bs extends ct{constructor(t,s){super();p(this,"canvas");p(this,"ctx");p(this,"context");p(this,"mouse");p(this,"axis");p(this,"vertices");p(this,"baseLine");p(this,"text");p(this,"lastMousePosition");this.canvas=t,this.ctx=t.getContext("2d"),this.context=s,this.mouse={x:0,y:0},this.lastMousePosition={x:0,y:0},this.canvas.addEventListener("wheel",n=>{this.lastMousePosition={x:n.x,y:n.y}}),window.addEventListener("scroll",()=>{const n=this.canvas.getBoundingClientRect();this.mouse.x=this.lastMousePosition.x-n.left,this.mouse.y=this.lastMousePosition.y-n.top}),this.canvas.addEventListener("mousemove",n=>{const i=this.canvas.getBoundingClientRect();this.mouse.x=n.x-i.left,this.mouse.y=n.y-i.top}),this.axis=[],this.vertices=Array(this.context.data.length).fill([]).map(()=>[]),this.baseLine=Array(this.context.style.baseLineCount+2).fill([]).map(()=>[]),this.text=[]}init(){const t=this.context.style.edgeCount,s=.25*this.context.style.canvasSize;for(let n=0;n<t;n++){const{x:i,y:a}=ft(n,s,this.context.style.edgeCount,this.context.style.canvasSize);this.axis.push({x:i,y:a})}for(let n=0;n<this.context.data.length;n++)for(let i=0;i<t;i++){const{x:a,y:r}=ft(i,this.context.data[n][i]*s/this.context.axis.axisMax[i],this.context.style.edgeCount,this.context.style.canvasSize);this.vertices[n].push({x:a,y:r})}if(this.context.style.baseLineCount>0){const n=s/(this.context.style.baseLineCount+1);for(let i=1;i<=this.context.style.baseLineCount+1;i++)for(let a=0;a<t;a++){const{x:r,y:l}=ft(a,i*n,this.context.style.edgeCount,this.context.style.canvasSize);this.baseLine[i].push({x:r,y:l})}}for(let n=0;n<t;n++){const{x:i,y:a}=ft(n,.27*this.context.style.canvasSize,this.context.style.edgeCount,this.context.style.canvasSize);this.text.push({x:i,y:a})}}update(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=this.findInsideChart();this.canvas.style.cursor=t!==null?"pointer":"auto",this.canvas.dispatchEvent(new CustomEvent("hover",{detail:t})),this.renderBaseElement();for(let s=0;s<this.context.data.length;s++)s!==t&&this.renderChart(s,!1,this.context.data.length>1);t!==null&&this.renderChart(t,!0,this.context.data.length>1)}renderBaseElement(){const t=this.context.style.edgeCount;this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle="#888888";for(const s of this.axis){this.ctx.moveTo(this.context.style.canvasSize/2,this.context.style.canvasSize/2);const{x:n,y:i}=s;this.ctx.lineTo(n,i)}if(this.ctx.stroke(),this.ctx.strokeStyle="#bbbbbb",this.context.style.baseLineCount>0)for(let s=1;s<=this.context.style.baseLineCount+1;s++){this.ctx.beginPath();for(const n of this.baseLine[s]){const{x:i,y:a}=n;this.ctx.lineTo(i,a)}this.ctx.closePath(),this.ctx.stroke()}this.ctx.font=this.context.axis.labelStyle,this.ctx.fillStyle=this.context.axis.labelColor,this.ctx.textAlign="center",this.ctx.textBaseline="middle";for(let s=0;s<t;s++){const{x:n,y:i}=this.text[s];if(s===0||t&&s===t/2)this.ctx.fillText(this.context.axis.label[s],n,s?i+10:i-10);else{const a=this.ctx.measureText(this.context.axis.label[s]).width;s<t/2?this.ctx.fillText(this.context.axis.label[s],n+a/2,i):this.ctx.fillText(this.context.axis.label[s],n-a/2,i)}}}findInsideChart(){for(let t=0;t<this.context.data.length;t++)if(Js(this.mouse,this.vertices[t],this.context.style.fillColor[t]!=="none"))return t;return null}renderChart(t,s,n){const i=this.context.style.mainColor,a=this.context.style.fillColor;this.ctx.beginPath(),this.ctx.lineWidth=s?5:3,this.ctx.lineWidth=s?5:3,this.ctx.strokeStyle=s?Jt(i[t%i.length]):i[t%i.length];for(const r of this.vertices[t]){const{x:l,y:c}=r;this.ctx.lineTo(l,c)}this.ctx.closePath(),a[t]!=="none"&&(this.ctx.fillStyle=s?Jt(H(a[t%a.length],s&&n?.45:.2)):H(a[t%a.length],s&&n?.45:.2),this.ctx.fill()),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.fillStyle=i[t%i.length];for(const r of this.vertices[t]){const{x:l,y:c}=r;this.ctx.moveTo(l,c),this.ctx.arc(l,c,s?6:5.5,0,2*Math.PI),this.ctx.fill()}this.ctx.closePath()}}const js={class:"t-radar-chart"},Bt=O({name:"t-radar-chart",__name:"radar-chart",props:Ws,emits:Hs,setup(e,{emit:o}){const t=e,s=JSON.parse(JSON.stringify($t)),n=Ct(s,t.context),i=M(null);let a=null;return lt(()=>{i.value.width=n.style.canvasSize,i.value.height=n.style.canvasSize,new Bs(i.value,n),i.value.addEventListener("hover",r=>{const l=r.detail;l!==a&&(o("hover",l),a=l)})}),(r,l)=>(b(),k("div",js,[v("canvas",{ref_key:"radarRef",ref:i},null,512)]))}}),Ys={install:e=>{e.component(Bt.name,Bt)}};class jt extends ct{constructor(t,s){super();p(this,"ctx");p(this,"context");p(this,"position");p(this,"arcColor");p(this,"fillColor");p(this,"fontColor");p(this,"content");p(this,"setContentTimestamp");p(this,"moveTimestamp");p(this,"moveStartPosition");p(this,"moveEndPosition");p(this,"moveArcDirection");p(this,"blinkTimestamp");p(this,"blinkArcColor");p(this,"blinkFillColor");p(this,"blinkFontColor");p(this,"fullAnimation");this.ctx=t,this.context=s,this.position=s.initialPosition,this.arcColor=s.arcColor,this.fillColor=s.fillColor,this.fontColor=s.fontColor,this.content=this.context.content,this.setContentTimestamp=null,this.moveTimestamp=null,this.moveStartPosition=null,this.moveEndPosition=null,this.moveArcDirection=null,this.blinkTimestamp=null,this.blinkArcColor=null,this.blinkFillColor=null,this.blinkFontColor=null,this.fullAnimation=s.withoutAnimation}init(){this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.fullAnimation||this.blink(this.arcColor,this.fillColor,this.fontColor)}update(){const t=new Date().getTime();if(this.ctx.font="24px Arial",this.ctx.beginPath(),this.moveTimestamp){const s=(t-this.moveTimestamp)/1500;if(s>1)this.moveTimestamp=null,this.moveStartPosition=null,this.moveArcDirection=null,this.shiftTo({x:this.moveEndPosition.x,y:this.moveEndPosition.y});else{let n=this.moveStartPosition.x+(this.moveEndPosition.x-this.moveStartPosition.x)*s,i=this.moveStartPosition.y+(this.moveEndPosition.y-this.moveStartPosition.y)*s;switch(this.moveArcDirection){case 0:i+=100*Math.sqrt(Math.sin(Math.PI*s)*.3);break;case 1:i-=100*Math.sqrt(Math.sin(Math.PI*s)*.3);break;case 2:n+=100*Math.sqrt(Math.sin(Math.PI*s)*.3);break;case 3:n-=100*Math.sqrt(Math.sin(Math.PI*s)*.3);break}this.shiftTo({x:n,y:i})}}if(this.blinkTimestamp){const s=(t-this.blinkTimestamp)/(this.fullAnimation?1200:800);if(s>=1)this.blinkTimestamp=null,this.blinkArcColor=null,this.blinkFillColor=null,this.blinkFontColor=null,this.fullAnimation=!0;else{const n=Math.sin(Math.PI*s/(this.fullAnimation?1:2));this.blinkArcColor=H(this.blinkArcColor,n),this.blinkFillColor=H(this.blinkFillColor,n),this.blinkFontColor=H(this.blinkFontColor,n)}}if(this.setContentTimestamp){const s=(t-this.setContentTimestamp)/2e3;if(s>=1)this.setContentTimestamp=null,this.blinkFontColor=null;else{const n=Math.sin(Math.PI*s/2);this.blinkFontColor=H(this.blinkFontColor,n)}}this.ctx.closePath(),this.drawPoint()}drawPoint(){this.ctx.lineWidth=3,this.ctx.strokeStyle=this.blinkArcColor===null?this.arcColor:this.blinkArcColor,this.ctx.fillStyle=this.blinkFillColor===null?this.fillColor:this.blinkFillColor,this.ctx.arc(this.position.x,this.position.y,this.context.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle=this.blinkFontColor===null?this.fontColor:this.blinkFontColor,this.ctx.fillText(String(this.content),this.position.x,this.position.y)}shiftTo(t){this.position=t,this.context.positionUpdate(this.context.pid,this.position)}moveTo(t,s){return this.moveTimestamp=new Date().getTime(),this.moveStartPosition=this.position,this.moveEndPosition=t,s===2?this.moveArcDirection=-1:Math.abs(this.moveEndPosition.x-this.moveStartPosition.x)>=Math.abs(this.moveEndPosition.y-this.moveStartPosition.y)?this.moveArcDirection=s?0:1:this.moveArcDirection=s?2:3,new Promise(n=>{setTimeout(()=>{n()},1500)})}setColor(t,s,n,i){this.arcColor=t,this.fillColor=s,this.fontColor=n,i||(this.blink(t,s,n),this.fullAnimation=!1)}setContent(t,s){s||(this.setContentTimestamp=new Date().getTime(),this.blinkFontColor=this.fontColor),this.content=t}blink(t,s,n){return this.blinkTimestamp=new Date().getTime(),this.blinkArcColor=t,this.blinkFillColor=s,this.blinkFontColor=n,new Promise(i=>{setTimeout(()=>{i()},1200)})}}const It=(e,o)=>{const t=o.x-e.x,s=o.y-e.y;return{dx:t,dy:s,d:Math.sqrt(t*t+s*s)}},Qs=(e,o,t)=>It(e,o).d<=t,Gs=(e,o,t)=>{const{dx:s,dy:n,d:i}=It(e,o);return{d:i,start:{x:t*s/i+e.x,y:t*n/i+e.y},end:{x:o.x-t*s/i,y:o.y-t*n/i}}},Yt=(e,o,t,s,n,i)=>{if(s)return o;const{dx:a,dy:r,d:l}=It(e,o);let c;return n?c=Math.max(1,t/l):i?c=t/l:c=l>.6*t&&l<1.2*t?1:t/l,{x:o.x-(1-c)*a*.01,y:o.y-(1-c)*r*.01}},L=(e,o)=>1e3*Math.min(e,o)+Math.max(e,o),D=(e,o,...t)=>{for(const s of t)if(!Number.isInteger(s)||s<0||s>=e||o.includes(s))return!1;return!0};class Qt extends ct{constructor(t,s){super();p(this,"ctx");p(this,"context");p(this,"edgeLength");p(this,"startPosition");p(this,"endPosition");p(this,"renderTimestamp");p(this,"connectTimestamp");p(this,"isRendering");p(this,"color");p(this,"renderColor");this.ctx=t,this.context=s,this.edgeLength=0,this.startPosition=s.startPosition,this.endPosition=s.endPosition,this.renderTimestamp=null,this.connectTimestamp=null,this.isRendering=!1,this.color=s.color,this.renderColor="#0ea0cd"}init(){this.context.withoutAnimation||(this.connectTimestamp=new Date().getTime())}update(){const t=new Date().getTime(),{d:s,start:n,end:i}=Gs(this.startPosition,this.endPosition,this.context.radius);if(this.edgeLength=s,this.ctx.beginPath(),this.ctx.moveTo(n.x,n.y),this.renderTimestamp){const a=(t-this.renderTimestamp)/2e3;if(a>=1)this.renderTimestamp=null;else{this.ctx.lineWidth=5;const r={x:n.x+(i.x-n.x)*a,y:n.y+(i.y-n.y)*a};this.ctx.strokeStyle=this.renderColor,this.ctx.lineTo(r.x,r.y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(r.x,r.y)}}if(this.connectTimestamp){const a=(t-this.connectTimestamp)/1500;if(a>=1)this.connectTimestamp=null;else{const r=Math.sin(Math.PI*a/2);this.color=H(this.color,r)}}this.ctx.lineWidth=this.isRendering?5:3,this.ctx.strokeStyle=this.isRendering?this.renderColor:this.color,this.ctx.lineTo(i.x,i.y),this.ctx.stroke()}setPosition(t,s){this.startPosition=t,this.endPosition=s}setColor(t,s){s||(this.connectTimestamp=new Date().getTime()),this.isRendering=!1,this.color=t}render(t,s,n){return this.setPosition(t,s),this.renderTimestamp=new Date().getTime(),this.renderColor=n,new Promise(i=>{setTimeout(()=>{i(),this.isRendering=!0},2e3)})}}class Us extends ct{constructor(t,s){super();p(this,"ctx");p(this,"context");p(this,"fontColor");p(this,"initialTimestamp");p(this,"colorSnippets");this.ctx=t,this.context=s,this.fontColor=s.fontColor,this.initialTimestamp=null,this.colorSnippets=[]}init(){this.context.withoutAnimation||(this.initialTimestamp=new Date().getTime())}update(){this.ctx.font=this.context.fontStyle;const t=new Date().getTime();if(this.initialTimestamp){const n=(t-this.initialTimestamp)/1e3;if(n>1)this.initialTimestamp=null;else{const i=Math.sin(Math.PI*n/2);this.fontColor=H(this.fontColor,i)}}const s=Array(this.context.content.length).fill(this.fontColor);for(let n=0;n<this.colorSnippets.length;n++){if(!this.colorSnippets[n].withoutAnimation){const i=(t-this.colorSnippets[n].startTimestamp)/1e3;if(i>1)this.colorSnippets[n].withoutAnimation=!0;else{const a=Math.sin(Math.PI*i/2);this.colorSnippets[n].color=H(this.colorSnippets[n].color,a)}}for(let i=this.colorSnippets[n].startIndex;i<=this.colorSnippets[n].endIndex;i++)s[i]=this.colorSnippets[n].color}for(let n=0;n<this.context.content.length;n++){const i=n?this.ctx.measureText(this.context.content.substring(0,n)).width:0;this.ctx.fillStyle=s[n],this.ctx.fillText(this.context.content[n],this.context.position.x+i,this.context.position.y)}}setColor(t,s,n,i){const a=new Date().getTime();this.colorSnippets.push({color:t,startIndex:s,endIndex:n,startTimestamp:a,withoutAnimation:i})}}class Xs extends ct{constructor(t,s){super();p(this,"canvas");p(this,"ctx");p(this,"graph");p(this,"context");p(this,"mouse");p(this,"mousedown");p(this,"points");p(this,"edges");p(this,"deletedPoints");p(this,"edgesMap");p(this,"textsMap");p(this,"draggingPoint");p(this,"dragOffset");p(this,"sysLock");p(this,"userLock");this.canvas=t,this.ctx=t.getContext("2d"),this.graph={},this.context=s,this.mouse={x:0,y:0},this.mousedown=!1,this.points=[],this.edges=[],this.deletedPoints=[],this.edgesMap={},this.textsMap={},this.draggingPoint=null,this.dragOffset={x:0,y:0},this.sysLock=!1,this.userLock=!1,this.canvas.addEventListener("mousemove",n=>{const i=this.canvas.getBoundingClientRect();this.mouse.x=n.x-i.left,this.mouse.y=n.y-i.top}),this.canvas.addEventListener("mousedown",()=>{this.mousedown=!0}),this.canvas.addEventListener("mouseup",()=>{this.mousedown=!1,this.draggingPoint=null})}init(){for(let t=0;t<this.context.point.pointCount;t++)this.graph[t]=[],this.points.push(new jt(this.ctx,{pid:t,initialPosition:this.context.point.initialPosition[t],radius:this.context.point.radius,content:this.context.point.content[t]===void 0?"":this.context.point.content[t],positionUpdate:this.updatePosition.bind(this),arcColor:this.context.point.arcColor,fillColor:this.context.point.fillColor,fontColor:this.context.point.fontColor,withoutAnimation:!0}));for(let t=0;t<this.context.edge.connectionStatus.length;t++){const s=L(this.context.edge.connectionStatus[t][0],this.context.edge.connectionStatus[t][1]);this.context.edge.connectionStatus[t][0]===this.context.edge.connectionStatus[t][1]||s in this.edgesMap||(this.graph[this.context.edge.connectionStatus[t][0]].push(this.context.edge.connectionStatus[t][1]),this.graph[this.context.edge.connectionStatus[t][1]].push(this.context.edge.connectionStatus[t][0]),this.edges.push(new Qt(this.ctx,{eid:s,radius:this.context.point.radius,startPosition:this.points[this.context.edge.connectionStatus[t][0]].position,endPosition:this.points[this.context.edge.connectionStatus[t][1]].position,color:this.context.edge.color,withoutAnimation:!0})),this.edgesMap[s]=t)}}update(){if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.draggingPoint===null){for(const[t,s]of this.points.entries())if(Qs(s.position,this.mouse,this.context.point.radius)&&this.mousedown){this.draggingPoint=t,this.dragOffset={x:this.points[t].position.x-this.mouse.x,y:this.points[t].position.y-this.mouse.y};break}}else if(!this.isLocked()){this.points[this.draggingPoint].shiftTo({x:this.mouse.x+this.dragOffset.x,y:this.mouse.y+this.dragOffset.y});const t=[this.draggingPoint],s=Array(this.context.point.pointCount).fill(!1);for(;t.length;){const n=t.shift();s[n]=!0;for(const i of this.graph[n]){const a=Yt(this.points[n].position,this.points[i].position,this.context.edge.distance,i===this.draggingPoint,!1,this.graph[i].length<=2);this.points[i].shiftTo(a),s[i]||t.push(i)}}if(!this.context.point.withoutRepulsion)for(let n=0;n<this.points.length;n++)for(let i=0;i<this.points.length;i++){if(n===i)continue;const a=Yt(this.points[n].position,this.points[i].position,100,!1,!0,!1);this.points[i].shiftTo(a)}}}isLocked(){return this.sysLock?!0:this.userLock}updatePosition(t,s){if(!this.deletedPoints.includes(t)){this.points[t].position=s;for(const n of this.graph[t]){const i=this.edgesMap[L(t,n)];this.edges[i].setPosition(this.points[n].position,this.points[t].position)}}}async moveTo(t,s){D(this.context.point.pointCount,this.deletedPoints,t)&&(this.sysLock=!0,await Promise.all([this.points[t].moveTo(s,2)]),this.sysLock=!1)}async swap(t,s){if(!D(this.context.point.pointCount,this.deletedPoints,t,s)||t===s)return;this.sysLock=!0;const n=this.points[t].position,i=this.points[s].position;await Promise.all([this.points[t].moveTo(i,1),this.points[s].moveTo(n,0)]),this.sysLock=!1}async shallowSwap(t,s){if(!D(this.context.point.pointCount,this.deletedPoints,t,s)||t===s)return;this.sysLock=!0;const n={},i=this.points[t].position,a=this.points[s].position,r=JSON.parse(JSON.stringify(this.graph));for(let l=0;l<this.graph[t].length;l++){const c=L(t,this.graph[t][l]),y=this.edgesMap[c];if(s!==this.graph[t][l]){const h=L(s,this.graph[t][l]);delete this.edgesMap[c],n[h]=y}}for(let l=0;l<this.graph[s].length;l++){const c=L(s,this.graph[s][l]),y=this.edgesMap[c];if(t!==this.graph[s][l]){const h=L(t,this.graph[s][l]);delete this.edgesMap[c],n[h]=y}}this.graph[t]=[],this.graph[s]=[];for(const l of Object.keys(this.graph))for(let c=0;c<this.graph[Number(l)].length;c++)(this.graph[Number(l)][c]===t||this.graph[Number(l)][c]===s)&&(this.graph[Number(l)].splice(c,1),c-=1);await Promise.all([this.points[t].moveTo(a,1),this.points[s].moveTo(i,0)]),this.graph=JSON.parse(JSON.stringify(r));for(let l=0;l<this.context.edge.connectionStatus.length;l++)for(let c=0;c<=1;c++)(this.context.edge.connectionStatus[l][c]===t||this.context.edge.connectionStatus[l][c]===s)&&(this.context.edge.connectionStatus[l][c]=t+s-this.context.edge.connectionStatus[l][c]);[this.graph[t],this.graph[s]]=[this.graph[s],this.graph[t]];for(const l of Object.keys(this.graph))for(let c=0;c<this.graph[Number(l)].length;c++)(this.graph[Number(l)][c]===t||this.graph[Number(l)][c]===s)&&(this.graph[Number(l)][c]=t+s-this.graph[Number(l)][c]);for(const l of Object.keys(n))this.edgesMap[Number(l)]=n[Number(l)];this.sysLock=!1}async renderEdge(t,s,n){const i=L(t,s);if(!D(this.context.point.pointCount,this.deletedPoints,t,s)||!(i in this.edgesMap))return;this.sysLock=!0;const a=this.edgesMap[i];await Promise.all([this.edges[a].render(this.points[t].position,this.points[s].position,n)]),this.sysLock=!1}addPoint(t,s,n,i,a,r){return this.context.point.pointCount+=1,this.graph[this.context.point.pointCount-1]=[],this.points.push(new jt(this.ctx,{pid:this.context.point.pointCount-1,initialPosition:s,radius:this.context.point.radius,content:t===void 0?this.context.point.pointCount-1:t,positionUpdate:this.updatePosition.bind(this),arcColor:n,fillColor:i,fontColor:a,withoutAnimation:r})),this.context.point.pointCount-1}delPoint(t){if(D(this.context.point.pointCount,this.deletedPoints,t)){for(let s=0;s<this.context.edge.connectionStatus.length;s++){const n=this.context.edge.connectionStatus[s][0],i=this.context.edge.connectionStatus[s][1];if(n===t||i===t){this.context.edge.connectionStatus.splice(s,1);const a=L(n,i);this.edges[this.edgesMap[a]].destroy(),delete this.edgesMap[a],s-=1}}this.deletedPoints.push(t),delete this.graph[t];for(const s of Object.keys(this.graph))for(let n=0;n<this.graph[Number(s)].length;n++)this.graph[Number(s)][n]===t&&(this.graph[Number(s)].splice(n,1),n-=1);this.points[t].destroy()}}addEdge(t,s,n,i){const a=L(t,s);!D(this.context.point.pointCount,this.deletedPoints,t,s)||a in this.edgesMap||(this.context.edge.connectionStatus.push([t,s]),this.edges.push(new Qt(this.ctx,{eid:a,radius:this.context.point.radius,startPosition:this.points[t].position,endPosition:this.points[s].position,color:n,withoutAnimation:i})),this.graph[t].push(s),this.graph[s].push(t),this.edgesMap[a]=this.edges.length-1)}delEdge(t,s){const n=L(t,s);if(!(!D(this.context.point.pointCount,this.deletedPoints,t,s)||!(n in this.edgesMap))){for(let i=0;i<this.context.edge.connectionStatus.length;i++){const a=this.context.edge.connectionStatus[i][0],r=this.context.edge.connectionStatus[i][1];if(a===t&&r===s||r===t&&a===s){this.context.edge.connectionStatus.splice(i,1);break}}for(let i=0;i<this.graph[t].length;i++)if(this.graph[t][i]===s){this.graph[t].splice(i,1);break}for(let i=0;i<this.graph[s].length;i++)if(this.graph[s][i]===t){this.graph[s].splice(i,1);break}this.edges[this.edgesMap[n]].destroy(),delete this.edgesMap[n]}}setPointColor(t,s,n,i,a){D(this.context.point.pointCount,this.deletedPoints,t)&&this.points[t].setColor(s,n,i,a)}setContent(t,s,n){D(this.context.point.pointCount,this.deletedPoints,t)&&this.points[t].setContent(s,n)}setEdgeColor(t,s,n,i){const a=L(t,s);!D(this.context.point.pointCount,this.deletedPoints,t,s)||!(a in this.edgesMap)||this.edges[this.edgesMap[a]].setColor(n,i)}setText(t,s,n,i,a){const r=Ge(8);return this.textsMap[r]=new Us(this.ctx,{content:t,position:s,fontColor:n,fontStyle:i,withoutAnimation:a}),r}setTextColor(t,s,n,i,a){if(!(t in this.textsMap))return;const r=this.textsMap[t].context.content;n>i||r[n]===void 0||r[i]===void 0||this.textsMap[t].setColor(s,n,i,a)}delText(t){t in this.textsMap&&(this.textsMap[t].destroy(),delete this.textsMap[t])}async blink(t,s,n,i,a){if(D(this.context.point.pointCount,this.deletedPoints,t))for(let r=0;r<s;r++)await Promise.all([this.points[t].blink(n,i,a)])}lock(t){this.userLock=t}async wait(t){return new Promise(s=>{setTimeout(()=>{s()},t*1e3)})}getPositions(t){if(t===void 0){const s=[];for(let n=0;n<this.points.length;n++)s.push(this.deletedPoints.includes(n)?void 0:this.points[n].position);return s}return D(this.context.point.pointCount,this.deletedPoints,t)?this.points[t].position:void 0}getConnectedPoints(t){if(!D(this.context.point.pointCount,this.deletedPoints,t))return[];const s=[];for(const n of this.graph[t])s.push(n);return s}getGraph(){return this.graph}}const Ks={context:{type:Object,default:()=>Et,validator(e){const o=JSON.parse(JSON.stringify(Et)),t=Ct(o,e),s=t.point.pointCount;t.point.initialPosition.length!==s&&V("graph -> initialPosition","点的初始位置未全部正确初始化");for(const n of t.edge.connectionStatus)(n[0]>=s||n[1]>=s)&&V("graph -> connectionStatus","连接情况应在0 ~ pointCount - 1之间");return!!q(t.point.radius)}}},Et={style:{canvasWidth:1e3,canvasHeight:800},point:{pointCount:3,radius:22,content:[0,1,2],initialPosition:[{x:300,y:100},{x:500,y:100},{x:400,y:245}],arcColor:"#000000",fillColor:"#ffffff",fontColor:"#000000",withoutRepulsion:!1},edge:{connectionStatus:[[0,1],[1,2],[0,2]],distance:150,color:"#000000"}},Zs={class:"t-graph"},Gt=O({name:"t-graph",__name:"graph",props:Ks,setup(e,{expose:o}){const t=e,s=JSON.parse(JSON.stringify(Et)),n=Ct(s,t.context),i=M(null);let a=null;return lt(()=>{i.value.width=n.style.canvasWidth,i.value.height=n.style.canvasHeight,a=new Xs(i.value,n)}),o({moveTo:async(x,C)=>{await a.moveTo(x,C)},swap:async(x,C)=>{await a.swap(x,C)},shallowSwap:async(x,C)=>{await a.shallowSwap(x,C)},renderEdge:async(x,C,m="#ffd1a0")=>{await a.renderEdge(x,C,m)},addPoint:(x=void 0,C,m="#000000",$="#ffffff",S="#000000",dt=!1)=>{a.addPoint(x,C,m,$,S,dt)},delPoint:x=>{a.delPoint(x)},addEdge:(x,C,m="#000000",$=!1)=>{a.addEdge(x,C,m,$)},delEdge:(x,C)=>{a.delEdge(x,C)},setPointColor:(x,C="#000000",m="#000000",$="#ffffff",S=!1)=>{a.setPointColor(x,C,m,$,S)},setContent:(x,C,m=!1)=>{a.setContent(x,C,m)},setEdgeColor:(x,C,m="#39fadd",$=!1)=>{a.setEdgeColor(x,C,m,$)},setText:(x,C,m="#000000",$="30px Arial",S=!1)=>a.setText(x,C,m,$,S),setTextColor:(x,C,m,$,S=!1)=>a.setTextColor(x,C,m,$,S),delText:x=>{a.delText(x)},blink:async(x,C,m="#ffc67a",$="#ffc67a",S="#000000")=>{await a.blink(x,C,m,$,S)},lock:x=>{a.lock(x)},wait:async x=>{await a.wait(x)},getPositions:x=>a.getPositions(x),getConnectedPoints:x=>a.getConnectedPoints(x),getGraph:()=>a.getGraph()}),(x,C)=>(b(),k("div",Zs,[v("canvas",{ref_key:"graphRef",ref:i},null,512)]))}}),tn={install:e=>{e.component(Gt.name,Gt)}},en=[hs,ws,Ts,Ms,$s,zs,Ys,tn],sn={install:e=>{for(const o of en)o.install(e)}},ce=e=>Array.isArray(e),he=e=>ce(e)?e:[e];let nn=function(e){let o=function(f){return he(f).forEach(T=>{var E;return d.set(Symbol((E=T.char)==null?void 0:E.innerText),n({...T}))}),this},t=()=>l().filter(f=>f.typeable),s=function(f,T){let E=[...d.keys()];d.set(E[f],n(T))},n=f=>(f.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},f),i=function(){d.forEach(f=>delete f.done)},a=function(){d=new Map,o(e)},r=()=>d,l=()=>Array.from(d.values()),c=f=>d.delete(f),y=(f=!1)=>f?l():l().filter(T=>!T.done),h=(f,T=!1)=>T?d.delete(f):d.get(f).done=!0,d=new Map;return o(e),{add:o,set:s,wipe:a,reset:i,destroy:c,done:h,getItems:y,getQueue:r,getTypeable:t}};const ue=e=>Array.from(e),Nt=e=>document.createTextNode(e);let At=e=>([...e.childNodes].forEach(o=>{if(o.nodeValue){[...o.nodeValue].forEach(t=>{o.parentNode.insertBefore(Nt(t),o)}),o.remove();return}At(o)}),e);const de=e=>{let o=document.implementation.createHTMLDocument();return o.body.innerHTML=e,At(o.body)},pe="data-typeit-id",G="ti-cursor",on="END",an={started:!1,completed:!1,frozen:!1,destroyed:!1},K={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(e=>({opacity:e})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},rn=`[${pe}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`;function fe(e,o=!1,t=!1){let s=e.querySelector(`.${G}`),n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:r=>{var l,c;if(s&&t){if((l=r.classList)!=null&&l.contains(G))return NodeFilter.FILTER_ACCEPT;if(s.contains(r))return NodeFilter.FILTER_REJECT}return(c=r.classList)!=null&&c.contains(G)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),i,a=[];for(;i=n.nextNode();)i.originalParent||(i.originalParent=i.parentNode),a.push(i);return o?a.reverse():a}function ln(e){return fe(de(e))}function cn(e,o=!0){return o?ln(e):ue(e).map(Nt)}const gt=e=>document.createElement(e),me=(e,o="")=>{let t=gt("style");t.id=o,t.appendChild(Nt(e)),document.head.appendChild(t)},Ut=e=>(ce(e)||(e=[e/2,e/2]),e),Xt=(e,o)=>Math.abs(Math.random()*(e+o-(e-o))+(e-o));let Kt=e=>e/2;function hn(e){let{speed:o,deleteSpeed:t,lifeLike:s}=e;return t=t!==null?t:o/3,s?[Xt(o,Kt(o)),Xt(t,Kt(t))]:[o,t]}const un=e=>(e.forEach(clearTimeout),[]),dn=()=>Math.random().toString().substring(2,9),Lt=e=>"value"in e;let pn=e=>Lt(e)?ue(e.value):fe(e,!0).filter(o=>!(o.childNodes.length>0));const fn=(e,o)=>{new IntersectionObserver((s,n)=>{s.forEach(i=>{i.isIntersecting&&(o(),n.unobserve(e))})},{threshold:1}).observe(e)};let X=e=>typeof e=="function"?e():e;const ge=e=>Number.isInteger(e);let Ft=(e,o=document,t=!1)=>o[`querySelector${t?"All":""}`](e),mn=e=>/body/i.test(e==null?void 0:e.tagName),gn=(e,o)=>{if(Lt(e)){e.value=`${e.value}${o.textContent}`;return}o.innerHTML="";let t=mn(o.originalParent)?e:o.originalParent||e;t.insertBefore(o,Ft("."+G,t)||null)},yn=(e,o,t)=>Math.min(Math.max(o+e,0),t.length);const at=(e,o)=>Object.assign({},e,o),xn=(e,o)=>{if(!e)return;let t=e.parentNode;(t.childNodes.length>1||t.isSameNode(o)?e:t).remove()},vn=(e,o,t)=>{let s=o[t-1],n=Ft(`.${G}`,e);e=(s==null?void 0:s.parentNode)||e,e.insertBefore(n,s||null)};function Cn(e){return typeof e=="string"?Ft(e):e}const bn=e=>/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML);let kn=(e,o,t)=>new Promise(s=>{let n=async()=>{await e(),s()};t.push(setTimeout(n,o||0))}),wn={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},Tn=(e,o)=>{let s=`${`[${pe}='${e}']`} .${G}`,n=getComputedStyle(o),i=Object.entries(wn).reduce((a,[r,l])=>`${a} ${r}: var(--ti-cursor-${r}, ${l||n[r]});`,"");me(`${s} { display: inline-block; width: 0; ${i} }`,e)};const mt=(e,o)=>new Array(o).fill(e),Zt=({queueItems:e,selector:o,cursorPosition:t,to:s})=>{if(ge(o))return o*-1;let n=new RegExp(on,"i").test(s),i=o?[...e].reverse().findIndex(({char:r})=>{let l=r.parentElement,c=l.matches(o);return n&&c?!0:c&&l.firstChild.isSameNode(r)}):-1;i<0&&(i=n?0:e.length-1);let a=n?0:1;return i-t+a};let xt=e=>new Promise(o=>{requestAnimationFrame(async()=>{o(await e())})}),ye=e=>e==null?void 0:e.getAnimations().find(o=>o.id===e.dataset.tiAnimationId),xe=({cursor:e,frames:o,options:t})=>{let s=e.animate(o,t);return s.pause(),s.id=e.dataset.tiAnimationId,xt(()=>{xt(()=>{s.play()})}),s},Sn=({cursor:e,options:o,cursorOptions:t})=>{if(!e||!t)return;let s=ye(e),n;s&&(o.delay=s.effect.getComputedTiming().delay,n=s.currentTime,s.cancel());let i=xe({cursor:e,frames:t.animation.frames,options:o});return n&&(i.currentTime=n),i},te=e=>{var o;return(o=e.func)==null?void 0:o.call(null)},_n=async({index:e,queueItems:o,wait:t,cursor:s,cursorOptions:n})=>{let i=o[e][1],a=[],r=e,l=i,c=()=>l&&!l.delay,y=i.shouldPauseCursor()&&n.autoPause;for(;c();)a.push(l),c()&&r++,l=o[r]?o[r][1]:null;if(a.length)return await xt(async()=>{for(let f of a)await te(f)}),r-1;let h=ye(s),d;return h&&(d={...h.effect.getComputedTiming(),delay:y?n.autoPauseDelay:0}),await t(async()=>{h&&y&&h.cancel(),await xt(()=>{te(i)})},i.delay),await Sn({cursor:s,options:d,cursorOptions:n}),e},Pn=e=>{var o,t;if(typeof e=="object"){let s={},{frames:n,options:i}=K.cursor.animation;return s.animation=e.animation||{},s.animation.frames=((o=e.animation)==null?void 0:o.frames)||n,s.animation.options=at(i,((t=e.animation)==null?void 0:t.options)||{}),s.autoPause=e.autoPause??K.cursor.autoPause,s.autoPauseDelay=e.autoPauseDelay||K.cursor.autoPauseDelay,s}return e===!0?K.cursor:e};const Mn=function(e,o={}){let t=async(u,g,w=!1)=>{C.frozen&&await new Promise(_=>{this.unfreeze=()=>{C.frozen=!1,_()}}),w||await m.beforeStep(this),await kn(u,g,ut),w||await m.afterStep(this)},s=(u,g)=>_n({index:u,queueItems:g,wait:t,cursor:Q,cursorOptions:m.cursor}),n=u=>xn(u,P),i=()=>Lt(P),a=(u=0)=>hn(m)[u],r=()=>pn(P),l=(u={})=>{let g=u.delay;g&&S.add({delay:g})},c=(u,g)=>(S.add(u),l(g),this),y=()=>x??Y,h=(u={})=>[{func:()=>ot(u)},{func:()=>ot(m)}],d=u=>{let g=m.nextStringDelay;S.add([{delay:g[0]},...u,{delay:g[1]}])},f=()=>{if(i())return;let u=gt("span");return u.className=G,dt?(u.innerHTML=de(m.cursorChar).innerHTML,u):(u.style.visibility="hidden",u)},T=async()=>{if(!i()&&Q&&P.appendChild(Q),dt){Tn($,P),Q.dataset.tiAnimationId=$;let{animation:u}=m.cursor,{frames:g,options:w}=u;xe({frames:g,cursor:Q,options:{duration:m.cursorSpeed,...w}})}},E=()=>{let u=m.strings.filter(g=>!!g);u.forEach((g,w)=>{if(this.type(g),w+1===u.length)return;let _=m.breakLines?[{func:()=>ht(gt("BR")),typeable:!0}]:mt({func:it,delay:a(1)},S.getTypeable().length);d(_)})},bt=async u=>{let g=y();g&&await kt({value:g});let w=r().map(_=>[Symbol(),{func:it,delay:a(1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let _=0;_<w.length;_++)await s(_,w);S.reset(),S.set(0,{delay:u})},j=u=>{let g=P.innerHTML;return g?(P.innerHTML="",m.startDelete?(P.innerHTML=g,At(P),d(mt({func:it,delay:a(1),deletable:!0},r().length)),u):g.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/).concat(u)):u},J=async(u=!0)=>{C.started=!0;let g=w=>{S.done(w,!u)};try{let w=[...S.getQueue()];for(let N=0;N<w.length;N++){let[z,R]=w[N];if(!R.done){if(!R.deletable||R.deletable&&r().length){let W=await s(N,w);Array(W-N).fill(N+1).map((wt,Tt)=>wt+Tt).forEach(wt=>{let[Tt]=w[wt];g(Tt)}),N=W}g(z)}}if(!u)return this;if(C.completed=!0,await m.afterComplete(this),!m.loop)throw"";let _=m.loopDelay;t(async()=>{await bt(_[0]),J()},_[1])}catch{}return this},kt=async u=>{Y=yn(u,Y,r()),vn(P,r(),Y)},ht=u=>gn(P,u),ot=async u=>m=at(m,u),Rt=async()=>{if(i()){P.value="";return}r().forEach(n)},it=()=>{let u=r();u.length&&(i()?P.value=P.value.slice(0,-1):n(u[Y]))};this.break=function(u){return c({func:()=>ht(gt("BR")),typeable:!0},u)},this.delete=function(u=null,g={}){u=X(u);let w=h(g),_=u,{instant:N,to:z}=g,R=S.getTypeable(),W=(()=>_===null?R.length:ge(_)?_:Zt({queueItems:R,selector:_,cursorPosition:y(),to:z}))();return c([w[0],...mt({func:it,delay:N?0:a(1),deletable:!0},W),w[1]],g)},this.empty=function(u={}){return c({func:Rt},u)},this.exec=function(u,g={}){let w=h(g);return c([w[0],{func:()=>u(this)},w[1]],g)},this.move=function(u,g={}){u=X(u);let w=h(g),{instant:_,to:N}=g,z=Zt({queueItems:S.getTypeable(),selector:u===null?"":u,to:N,cursorPosition:y()}),R=z<0?-1:1;return x=y()+z,c([w[0],...mt({func:()=>kt(R),delay:_?0:a(),cursorable:!0},Math.abs(z)),w[1]],g)},this.options=function(u,g={}){return u=X(u),ot(u),c({},g)},this.pause=function(u,g={}){return c({delay:X(u)},g)},this.type=function(u,g={}){u=X(u);let{instant:w}=g,_=h(g),z=cn(u,m.html).map(W=>({func:()=>ht(W),char:W,delay:w||bn(W)?0:a(),typeable:W.nodeType===Node.TEXT_NODE})),R=[_[0],{func:async()=>await m.beforeString(u,this)},...z,{func:async()=>await m.afterString(u,this)},_[1]];return c(R,g)},this.is=function(u){return C[u]},this.destroy=function(u=!0){ut=un(ut),X(u)&&Q&&n(Q),C.destroyed=!0},this.freeze=function(){C.frozen=!0},this.unfreeze=()=>{},this.reset=function(u){!this.is("destroyed")&&this.destroy(),u?(S.wipe(),u(this)):S.reset(),Y=0;for(let g in C)C[g]=!1;return P[i()?"value":"innerHTML"]="",this},this.go=function(){return C.started?this:(T(),m.waitUntilVisible?(fn(P,J.bind(this)),this):(J(),this))},this.flush=function(u=()=>{}){return T(),J(!1).then(u),this},this.getQueue=()=>S,this.getOptions=()=>m,this.updateOptions=u=>ot(u),this.getElement=()=>P;let P=Cn(e),ut=[],Y=0,x=null,C=at({},an);o.cursor=Pn(o.cursor??K.cursor);let m=at(K,o);m=at(m,{html:!i()&&m.html,nextStringDelay:Ut(m.nextStringDelay),loopDelay:Ut(m.loopDelay)});let $=dn(),S=nn([{delay:m.startDelay}]);P.dataset.typeitId=$,me(rn);let dt=!!m.cursor&&!i(),Q=f();m.strings=j(he(m.strings)),m.strings.length&&E()};const $n={},En=e=>(se("data-v-a4ea68ff"),e=e(),ne(),e),Dn={class:"editor"},In=En(()=>v("div",{class:"editor-header"},null,-1)),Nn={class:"editor-body"};function An(e,o){return b(),k("div",Dn,[In,v("div",Nn,[rt(e.$slots,"default",{},void 0,!0)])])}const Ln=ee($n,[["render",An],["__scopeId","data-v-a4ea68ff"]]),Fn=e=>(se("data-v-1aa776c3"),e=e(),ne(),e),Rn=Fn(()=>v("div",{class:"home-header"},[v("p",{class:"home-header-title"},"快速使用")],-1)),On={class:"home-body"},zn={id:"editor"},Wn={class:"home-terminal"},Hn=O({__name:"home",setup(e){const o=M(null),t=M(!1);Me(o,([{isIntersecting:a}])=>{t.value=a});const s=M(!1),n=M(!0),i=M();return _t([t,s],a=>{a!=null&&a[0]&&(a!=null&&a[1])&&n.value===!0&&(n.value=!1,i.value&&new Mn(i.value,{speed:50,startDelay:900}).type('<h1 style="opacity: 0.5;color: var(--vi-welcome-color)">Welcome to use Tea Design!</h1>',{delay:100}).type(`<br /><span class="line"><span style="color:var(--code-token-keyword);">import</span><span style="color:var(--code-color-text);"> { createApp } </span><span style="color:var(--code-token-keyword);">from</span><span style="color:var(--code-color-text);"> </span><span style="color:var(--code-token-string-expression);">'vue'</span>`).type(`<br /><span class="line"><span style="color:var(--code-token-keyword);">import</span><span style="color:var(--code-color-text);"> App </span><span style="color:var(--code-token-keyword);">from</span><span style="color:var(--code-color-text);"> </span><span style="color:var(--code-token-string-expression);">'./App.vue'</span></span>`).type(`<br /><span class="line"><span style="color:var(--code-token-keyword);">import</span><span style="color:var(--code-color-text);"> TeaDesign </span><span style="color:var(--code-token-keyword);">from</span><span style="color:var(--code-color-text);"> </span><span style="color:var(--code-token-string-expression);">'tea-design'</span></span>`,{delay:100}).type(`<br /><span class="line"><span style="color:var(--code-token-keyword);">import</span><span style="color:var(--code-color-text);"> </span><span style="color:var(--code-token-string-expression);">'tea-design/dist/style.css'</span></span>`).type(`<br /><br /><br /><span class="line"><span style="color:var(--code-token-function);">createApp</span><span style="color:var(--code-color-text);">(app)</span><span style="color:var(--code-token-function);">.use</span><span style="color:var(--code-color-text);">(TeaDesign)</span><span style="color:var(--code-token-function);">mount</span><span style="color:var(--code-color-text);">(</span><span style="color:var(--code-token-string-expression);">'#app'</span><span style="color:var(--code-color-text);">)</span>`).go())}),lt(()=>{s.value=!0}),(a,r)=>(b(),k("div",{ref_key:"homeRef",ref:o,class:I(["home",{"fade-in":t.value}])},[Rn,v("div",On,[oe(Ln,null,{default:vt(()=>[v("div",zn,[v("div",Wn,[v("pre",{ref_key:"block",ref:i,style:{border:"0",margin:"0","background-color":"transparent"},class:"language-vue extra-class"},null,512)])])]),_:1})])],2))}});const Vn=ee(Hn,[["__scopeId","data-v-1aa776c3"]]),qn={__name:"layout",setup(e){const{Layout:o}=re;return(t,s)=>(b(),Dt(et(o),null,{"home-features-after":vt(()=>[oe(Vn)]),_:1}))}};const Jn={...re,enhanceApp:async({app:e})=>{e.use(sn)},Layout:qn};function ve(e){if(e.extends){const o=ve(e.extends);return{...o,...e,async enhanceApp(t){o.enhanceApp&&await o.enhanceApp(t),e.enhanceApp&&await e.enhanceApp(t)}}}return e}const nt=ve(Jn),Bn=O({name:"VitePressApp",setup(){const{site:e}=We();return lt(()=>{He(()=>{document.documentElement.lang=e.value.lang,document.documentElement.dir=e.value.dir})}),Ve(),qe(),Je(),nt.setup&&nt.setup(),()=>Be(nt.Layout)}});async function jn(){const e=Qn(),o=Yn();o.provide(Ee,e);const t=De(e.route);return o.provide(Ie,t),o.component("Content",Ne),o.component("ClientOnly",Ae),Object.defineProperties(o.config.globalProperties,{$frontmatter:{get(){return t.frontmatter.value}},$params:{get(){return t.page.value.params}}}),nt.enhanceApp&&await nt.enhanceApp({app:o,router:e,siteData:Le}),{app:o,router:e,data:t}}function Yn(){return Fe(Bn)}function Qn(){let e=Pt,o;return Re(t=>{let s=Oe(t);return s?(e&&(o=s),(e||o===s)&&(s=s.replace(/\.js$/,".lean.js")),Pt&&(e=!1),ze(()=>import(s),[])):null},nt.NotFound)}Pt&&jn().then(({app:e,router:o,data:t})=>{o.go().then(()=>{$e(o.route,t.site),e.mount("#app")})});export{jn as createApp};
