import{m as k,i as L,a as I,b as z}from"./chunks/graph.af0b31dc.js";import{t as P}from"./chunks/errors.2cebd531.js";import{d as f,h as m,j as N,a4 as O,o as t,c,F as v,D as w,N as V,t as b,e as J,H as A,a5 as _,z as x,_ as T,Q as D}from"./chunks/framework.7626db26.js";const R={context:{type:Object,default:()=>B,validator:e=>{const l=JSON.parse(JSON.stringify(B)),s=k(l,e);return!L(s)||!s.ignoreList.every(p=>I(p))?!1:((!z(s.opacity)||s.opacity.length!==2)&&P("typewrite -> opacity","透明度应为长度为2的数组"),!0)}}},B={keyboardMap:{Control:"ctrl",Meta:"win",ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→",Escape:"esc",Shift:"⇧",Enter:"⏎ ",Backspace:"⌫"," ":"⎵"},ignoreList:[],duration:3,interval:.5,fontColor:"#ffffff",backgroundColor:"#000000",fontSize:2,bottom:180,right:180,combo:"multiple",opacity:[1,1]},j={key:0,class:"t-typewrite"},$=f({name:"t-typewrite",__name:"typewrite",props:R,setup(e,{expose:l}){const s=e,p=JSON.parse(JSON.stringify(B)),n=k(p,s.context),a=m([]);let u=null,C=null,E=!1;const h=o=>{if(d.value&&!n.ignoreList.includes(o.key)){const r=o.key in n.keyboardMap?n.keyboardMap[o.key]:o.key,y=new Date().getTime();if((u?y-u:0)>n.interval*1e3)E=!1,setTimeout(()=>{a.value.pop()},n.duration*1e3),a.value.unshift([r]);else if(n.combo==="showAll")a.value.length?a.value[0].push(r):a.value.unshift([r]);else if(n.combo==="multiple"){const i=a.value[0];if(i){const F=a.value[0].at(-1),M=E?a.value[0][i.length-2]:F,U=E?parseInt(F.substring(3,F.length-1)):1;M===r?(E?a.value[0].pop():E=!0,a.value[0].push(` ∗ ${U+1} `)):(E=!1,a.value[0].push(r))}else a.value.unshift([r])}C&&clearTimeout(C),C=setTimeout(()=>{a.value.pop(),clearTimeout(C)},n.duration*1e3),u=y}};N(()=>{window.addEventListener("keydown",h)}),O(()=>{window.removeEventListener("keydown",h)});const q=o=>({bottom:o*90+n.bottom+"px",right:n.right+"px",color:n.fontColor,backgroundColor:n.backgroundColor,fontSize:n.fontSize+"rem",opacity:o?n.opacity[1]:n.opacity[0],animation:o?"slide-up 0.3s ease-out":"none"}),d=m(!1);return l({start:()=>{d.value=!0},stop:()=>{a.value=[],d.value=!1}}),(o,r)=>d.value&&a.value.length>0?(t(),c("div",j,[(t(!0),c(v,null,w(a.value,(y,g)=>(t(),c("div",{class:"t-typewrite-content",key:g+y.join(","),style:V(q(g))},[(t(!0),c(v,null,w(y,(i,F)=>(t(),c("span",{key:F+g+i},b(i),1))),128))],4))),128))])):J("",!0)}}),S=e=>{const l=A($,{context:e}),s=document.createElement("div");return document.body.appendChild(s),_(l,s),{start:l.component.exposed.start,stop:l.component.exposed.stop,unmount:()=>{_(null,s),document.body.removeChild(s)}}},K=f({__name:"demo",setup(e){x(()=>{l.unmount()});const l=S();l.start();const s=m("关闭"),p=()=>{s.value==="关闭"?(l.stop(),s.value="开启"):(l.start(),s.value="关闭")};return(n,a)=>(t(),c("button",{onClick:p},"点击"+b(s.value)+"监听",1))}});const Q=T(K,[["__scopeId","data-v-a4b8ed83"]]),W=f({__name:"config",setup(e){const l={keyboardMap:{Control:"⌃",Alt:"⌥",Escape:"⎋"},ignoreList:[" ","Enter","Meta"],fontColor:"#f278b6",backgroundColor:"#2d2e2f",bottom:700,opacity:[.8,.3],combo:"showAll"};x(()=>{s.unmount()});const s=S(l),p=m("开启"),n=()=>{p.value==="关闭"?(s.stop(),p.value="开启"):(s.start(),p.value="关闭")};return(a,u)=>(t(),c("button",{onClick:n},b(p.value)+"自定义配置",1))}});const Z=T(W,[["__scopeId","data-v-fb241686"]]),H=D("",7),G=D("",6),X=D("",5),os=JSON.parse('{"title":"打字显示 Typewrite","description":"","frontmatter":{},"headers":[],"relativePath":"components/typewrite/index.md","filePath":"components/typewrite/index.md"}'),Y={name:"components/typewrite/index.md"},es=Object.assign(Y,{setup(e){return(l,s)=>(t(),c("div",null,[H,A(Q),G,A(Z),X]))}});export{os as __pageData,es as default};
